---
title: Robotics Theory - 2D Robotics
date: 2021-05-04 23:47:20 +/-0530
categories: [Tutorials, Robotics Theory]
tags: [matlab]     # TAG names should always be lowercase
math: true
---

## Introduction

## Coordinate Transformation in 2D
The motion of manipulators and robots is often very complex and mathematically demand-
ing. A single coordinate frame usually isn’t sufficient and its often convenient to use multiple
coordinate frames (fixed or moving) to make things easier.

**Terminology**\\
Fixed and World coordinate frames are used interchangeably and mean the same thing.\\
Mobile and Moving coordinate frames are used interchangeably and mean the same thing.

### What is a Coordinate Frame ?
If $p$ is a vector in $R^n$ and $X = {x^1 , x^2 , ...x^n}$ be a complete orthonormal set of $R^n$, then
coordinates of $p$ with respect to $X$ are denoted as $[p]^x$.


$$
\begin{aligned}
	p &= \Sigma{[p]_k^x}\hat{x^k} \\
	[p]_k^x &= p.x^k
\end{aligned}
$$

<!--Figure Needs-->


### Translation
Assume a fixed frame $(O_0 − X_0 − Y_0 )$ and a mobile frame $(O_1 − X_1 − Y_1 )$. Let $C$ be a point
in space. The relation between both the frames and $C$ can be derived using simple math.

<!--Figure Needs-->

The following inferences can be made from the above figure:\\
Position of C $\mathit{wrt}$ frame $(O_0-X_0-Y_0)$ can be represented as 

$$
\begin{equation*}
	C^0 = \begin{bmatrix}
		X_C^0\\
		Y_C^0
	\end{bmatrix}
\end{equation*}
$$

Position of C $\textit{wrt}$ frame $(O_1-X_1-Y_1)$ can be represented as  

$$
\begin{equation*}
	C^1 = \begin{bmatrix}
		X_C^1\\
		Y_C^1
	\end{bmatrix}
\end{equation*}
$$

Position of $O_1$ $\textit{wrt}$ frame $(O_0-X_0-Y_0)$ can be represented as

$$ 
\begin{equation*}
	O_1^0 = \begin{bmatrix}
		X_0\\
		Y_0
	\end{bmatrix}
\end{equation*}
$$

Position of $O_0$ $\textit{wrt}$ frame $(O_1-X_1-Y_1)$ can be represented as 

$$
\begin{equation*}
	O_0^1 = \begin{bmatrix}
		-X_0\\
		-Y_0
	\end{bmatrix}
\end{equation*}
$$

### Rotation
Assume a fixed frame $(O_0-X_0-Y_0)$ and a mobile frame $(O_1-X_1-Y_1)$. Let C be a point in space. The relation between both the frames and C can be derived using simple math.

<!--Figure-->

The following equations can be written down based on the above figure 

$$\hat{X_1} = (X_1\cos{\theta})\hat{X_0} + (X_1\sin{\theta})\hat{Y_0} $$ 

$$\hat{Y_1} = - (Y_1\sin{\theta})\hat{X_0} + (Y_1\cos{\theta})\hat{Y_0} $$ 

Upon rearranging the terms,

$$
\begin{equation*}
	\begin{bmatrix}
		\hat{X_1}\\
		\hat{Y_1}\\
	\end{bmatrix}
 = \begin{bmatrix}
 	\cos{\theta} & \sin{\theta}\\
 	-\sin{\theta} & \cos{\theta}\\
 \end{bmatrix}
\begin{bmatrix}
	\hat{X_0}\\
	\hat{Y_0}\\
\end{bmatrix}
\end{equation*}
$$

The above trigonometric matrix is called the rotation matrix, denoted by $R$. The relation between the coordinates of point C in the fixed and mobile frame can therefore be expressed as:
$$C^1 = R_0^1C^0$$

### Combined Translation & Rotation 
Assume a fixed frame $(O_0-X_0-Y_0)$ and a mobile frame $(O_2-X_2-Y_2)$. Let us assume an intermediate mobile frame given by $(O_1-X_1-Y_1)$. 
Let C be a point of interest, The frame $O_2$ can be generated by translation from frame $O_0$ to give frame $O_1$ and then rotation by $\theta$ to give frame $O_2$.

<!-- Figure-->
The coordinates of point C between the mobile and fixed frame can be related using the following:

$$C^0 = O_1^0 + R_1^0C^1$$

<!--Figure -->

### 2D - RR Manipulator
Consider the following manipulator diagram for a 2 DoF planar robotic arm.

<!--Figure-->

$P^1 = \begin{bmatrix}
	l_1\\
	0\\
\end{bmatrix};$

$Q^2 = \begin{bmatrix}
	l_2\\
	0\\
\end{bmatrix};$

$$
R_1^0 = \begin{bmatrix}
	\cos{\theta_1} & -\sin{\theta_1} \\
	\sin{\theta_1} & \cos{\theta_1} \\
\end{bmatrix}
$$

$$
R_2^1 = \begin{bmatrix}
	\cos{\theta_2} & -\sin{\theta_2}\\
	\sin{\theta_2} & \cos{\theta_2}\\
\end{bmatrix}
$$


$P^0 = R_1^0P^1$

$Q^1 = R_2^1Q^2 + P^1$

$Q^0 = R_1^0Q^1 = R_1^0(R_2^1Q^2 + P^1)$

$$
\begin{align}
	P^0 &= \begin{bmatrix}
		X_p^0\\
		Y_p^0\\
	\end{bmatrix}
=
\begin{bmatrix}
	l_1\cos{\theta_1}\\
	l_1\sin{\theta_1}
\end{bmatrix}\\
Q^0 &= \begin{bmatrix}
	X_Q^0\\
	Y_Q^0\\
\end{bmatrix}
= \begin{bmatrix}
	l_1\cos{\theta_1} + l_2\cos{(\theta_1+\theta_2)}\\
	l_1\sin{\theta_1} + l_2\sin{(\theta_1+\theta_2)}\\
\end{bmatrix}
\end{align}
$$

### Forward Kinematics
The equations for the RR manipulator can be used to draw the arm in MATLAB, the code for the same is given below.

```matlab
clc
%clear all
close all
%% Manipulator Parameters
l1= 0.5; l2=0.3;
theta1 = 0.3; theta2 = 0.4;
%% World Frame
x_0=0; y_0=0;
%% Link 1
x_p0= l1*cos(theta1);
y_p0= l1*sin(theta1);
%% Link 2
x_q0 = l1*cos(theta1) + l2*cos(theta1+theta2);
y_q0 = l1*sin(theta1) + l2*sin(theta1+theta2);
%% Draw Lines
line([x_0,x_p0],[y_0,y_p0],'Linewidth',5,'Color',[204,204,1]/255);
line([x_q0,x_p0],[y_q0,y_p0],'Linewidth',5,'Color','cyan');
axis('equal');
xlabel('x');
ylabel('y');
title('RR-Manipulator')
```
_main.m_